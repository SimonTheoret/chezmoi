FROM registry.fedoraproject.org/fedora-toolbox:43
RUN dnf --assumeyes install \
    gcc-c++ \
    perl \
    openssl-libs \
    openssl \
    gcc \
    golang \
    nvim \
    fzf \
    npm \
    fish \
    docker \ 
    docker-compose \
    curl \
    tldr \
    nodejs-bash-language-server \
    direnv \
    uv \
    nvim \
    helix \
    fd-find \
    bat \
    zoxide \
    ripgrep \
    git-delta \
    just \
    du-dust \
    btop \
    chezmoi

RUN dnf clean all
RUN curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y

SHELL ["usr/bin/fish", "-c"]
RUN rustup component add rust-analyzer

ENV RUSTFLAGS "-C target-cpu=native" 
RUN cargo install --locked starship --force 
RUN cargo install --locked eza --force
RUN cargo install --locked yazi-fm yazi-cli --force
RUN cargo install --locked zellij --force
RUN cargo install --locked tree-sitter-cli --force
RUN cargo install shellharden --force
RUN cargo install cargo-nextest --locked --force
RUN cargo install cargo-insta --locked --force

RUN go install github.com/jesseduffield/lazygit@latest
RUN go install github.com/jesseduffield/lazydocker@latest
RUN go install mvdan.cc/sh/v3/cmd/shfmt@latest

RUN curl -sL https://raw.githubusercontent.com/jorgebucaran/fisher/main/functions/fisher.fish | source && fisher install jorgebucaran/fisher
RUN fisher install gazorby/fifc

RUN ya pkg install
